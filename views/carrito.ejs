<%- include ('partials/head.ejs') -%>
<%- include ('partials/header.ejs') -%>

<section class="carrito-all">

  <div class="productos-carrito">
    <h3>Revisa tus productos</h3>
    
    <% productosEnCarrito.forEach(item => { %>
      <div class="prod-carrito">
        <div class="imagen-nombre">
        <div class="img-div-carrito">
          <% if ( item.producto && item.producto.imagen) { %>
            <img src="<%= item.producto.imagen %>" alt="" class="img-producto-carrito">
          <% } else { %>
            <p>Imagen no disponible</p>
          <% } %>
        </div>
        <div class="cart-nombre">
          <% if (item.producto) { %>
            <h4><%= item.producto.nombre %></h4>
            <p>Color: <%= item.producto.color %></p>
          <% } else { %>
            <p>Producto no disponible</p>
          <% } %>
        </div>

       
      </div>

        <div class="cart-pyc">
          <% if (item.producto) { %>
            <p class="cart-precio">Precio: $<%= item.producto.precio %></p>
          
             
              <p id="cantidad-<%= item.producto._id %>">Cantidad: <%= item.cantidad %></p>
             
             
          <% } else { %>
            <p>Precio y cantidad no disponibles</p>
          <% } %>
          <form action="/carrito/eliminar?_method=DELETE" method="post">
            <input type="hidden" name="_method" value="DELETE">
            <input type="hidden" name="productId" value="<%= item.producto._id %>">
            <button class="C-AddCart" onclick="elimnarCarrito('<%= item.producto._id %>')"><i class="bi bi-trash3"></i>Eliminar producto</button>
          </form>
        </div>

      

      </div>
    <% }); %>
  </div>


<div class="completar-datos">

 <h3>Resumen del pedido</h3>

 <div class="linea-cart"></div>

 <div class="codigo-cart"> 
    <form> <label> </label> <input type="text" class="texto-codigo"  placeholder= "Introduce el código del cupón">   </form>
    <button class="lupita-codigo">Aplicar cupón</i></button>
</div>

<div class="linea-cart"></div>

<h4 class="detalles-pago">Detalles del pago</h4>

<div class="linea-cart"></div>

 <div class="check-cart">


  
  <div class="check-cart">
    <div class="form-check">
      <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1" onclick="mostrarOpcion('opcion1')" >
      <label class="form-check-label" for="flexRadioDefault1">
        Pago al recibir el producto
      </label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" onclick="mostrarOpcion('opcion2')" >
      <label class="form-check-label" for="flexRadioDefault2">
        Tarjeta de Shopcart
      </label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault3" onclick="mostrarOpcion('opcion3')">
      <label class="form-check-label" for="flexRadioDefault3">
        Paypal
      </label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault4" onclick="mostrarOpcion('opcion4')">
      <label class="form-check-label" for="flexRadioDefault4">
        Tarjeta de débito o crédito
      </label>
    </div>
  </div>

  <div class="tarjetas-check">
    <div class="opcion-check" id="opcion1">
     
    </div>
    <div class="opcion-check" id="opcion2">
      <img src="/img/tarjetas/tarjeta-shopcart.png"  class=" bord" alt="">
    </div>
    <div class="opcion-check" id="opcion3">
      <img src="/img/tarjetas/6.png"  class="p-2 bord" alt="">
    </div>
    <div class="opcion-check" id="opcion4">
      <img src="/Img/tarjetas/4Amazon.png" class="p-2 bord" alt="">
      <img src="/Img/tarjetas/2visa.png" class="p-2 bord" alt="">
      <img src="/Img/tarjetas/3.png" class="p-2 bord" alt="">
    </div>
  </div>








<div class="desaparecee">


 <p class="cart-form-p">Email*</p>
 <input class="cart-form form-control" type="email" placeholder="Escribe aquí...">

 <p class="cart-form-p">Nombre del titular de la tarjeta*</p>
 <input class="cart-form form-control"  type="text" placeholder="Escribe aquí...">

 <p class="cart-form-p">Número de la tarjeta*</p>
<div class="input-with-icon">
  <i class="bi bi-credit-card-2-front card-imagen-cart"></i>
  <input class="cart-form-card form-control" type="text" oninput="this.value = this.value.replace(/[^0-9]/, '')" placeholder="0000******1245">
</div>


 <div class="dos-forms-cart">
    <div>
        <p class="cart-form-p"> Vencimiento</p>
        <input  type="text" class="cart-form-dos form-control" placeholder="MM/YY" >
    </div>
    <div>
        <p class="cart-form-p">CVC</p>
       <input type="text" oninput="this.value = this.value.replace(/[^0-9]/, '')" class="cart-form-dos form-control" placeholder="000" maxlength="3"> 
    </div>
    
 </div>

</div>


 <div class="sub-total">
  <p>Sub Total</p>
  <p id="precioTotal">$<%= precioTotal %></p>
</div>

<div class="linea-cart"></div>

<div class="total-carrito">
  <p>Total</p>
  <p id="precioTotal">$<%= precioTotal %></p>
</div>
         
<button class="btn-pagar-cart">Pagar $<span id="precioTotalCarrito"><%= precioTotal %></span></button>





</div>

</section>

<%- include ('partials/footer.ejs') -%>